
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Entomological Research Sub Station - Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body{background:#f7fafc;font-family:Inter,Arial,Helvetica;margin:0;padding:0;}
  .nav-header{background:#2c3e50;color:#fff;padding:12px 20px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 4px rgba(0,0,0,0.1);position:sticky;top:0;z-index:1000;}
  .nav-header a{color:#fff;text-decoration:none;padding:8px 16px;background:#3498db;border-radius:4px;transition:background 0.3s;font-weight:500;}
  .nav-header a:hover{background:#2980b9;}
  .topbar{background:linear-gradient(90deg,#0f172a,#1e3a8a);color:white;padding:20px 30px;}
  .topbar h1{margin:0;font-size:22px;letter-spacing:0.2px;}
  .card{border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.08);}
  .stat{font-weight:700;font-size:28px;color:#0f172a;}
  .muted{color:#6b7280;}
  table.dataTable thead th{background:#eef2ff;}
</style>
</head>
<body>
  <div class="nav-header">
    <span style="font-weight:600;">Agriculture Complex Multan</span>
    <a href="/">Home</a>
  </div>
  <div class="topbar">
    <h1>Entomological Research Sub Station Multan — Asset Register Dashboard</h1>
    <div class="muted">Focal Person: Dr. Asifa Hameed · Last verification snapshots included where available</div>
  </div>

  <div class="container py-4">
    <div class="row g-3 mb-4">
      <div class="col-md-4">
        <div class="card p-3">
          <div class="muted">Total Register Entries</div>
          <div class="stat" id="totalEntries">92</div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card p-3">
          <div class="muted">Items Verified (latest snapshot)</div>
          <div class="stat" id="verifiedCount">48</div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card p-3">
          <div class="muted">Unverified / Missing</div>
          <div class="stat text-danger" id="unverifiedCount">44</div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-8">
        <div class="card p-3 mb-4">
          <h5>Asset Register (sample / searchable)</h5>
          <table id="assetTable" class="display" style="width:100%">
            <thead><tr><th>#</th><th>Name</th><th>Qty</th><th>Date Received</th><th>Last Verification</th></tr></thead>
            <tbody>
              <tr><td>1</td><td>Varnish</td><td>4 kg</td><td>26.05.1997</td><td>26.08.1999</td></tr>
              <tr><td>2</td><td>Enamel</td><td>3 buckets</td><td>26.05.1997</td><td>26.08.1999</td></tr>
              <tr><td>3</td><td>Chak matte special</td><td>6 Kg</td><td>02.06.1997</td><td>26.08.1999</td></tr>
              <tr><td>4</td><td>Zinc</td><td>3 Kg</td><td>02.06.1997</td><td>26.08.1999</td></tr>
              <tr><td>5</td><td>Plaster of Paris</td><td>5 Kg</td><td>02.06.1997</td><td>26.08.1999</td></tr>
              <tr><td>6</td><td>Distember</td><td>4</td><td>02.06.1997</td><td>26.08.1999</td></tr>
              <tr><td>7</td><td>Sheet BKA light</td><td>7</td><td>29.05.1997</td><td>01.09.2016</td></tr>
              <tr><td>8</td><td>Wooden board 6x6</td><td>7</td><td>29.05.1997</td><td>01.09.2016</td></tr>
              <tr><td>9</td><td>Pipe plastic 3/4 inch</td><td>12</td><td>29.05.1997</td><td>01.09.2016</td></tr>
              <tr><td>10</td><td>Electric wire</td><td>20 meter</td><td>19.05.1997</td><td>26.08.1999</td></tr>
              <tr><td>11</td><td>Petri-Dishes 40 ml</td><td>200</td><td>05.09.1997</td><td>01.09.2016</td></tr>
              <tr><td>12</td><td>Light microscope</td><td>1</td><td>29.03.1998</td><td>01.09.2016</td></tr>
              <tr><td>13</td><td>Generator</td><td>1</td><td>25.02.1998</td><td>01.09.2016</td></tr>
              <tr><td>14</td><td>Incubator TV 100</td><td>1</td><td>28.02.1997</td><td>11.04.2018</td></tr>
              <tr><td>15</td><td>Swift Stereo SM 80</td><td>1</td><td>28.02.1997</td><td>11.04.2018</td></tr>
              <tr><td>16</td><td>Air conditioner cooling Deluxe</td><td>1</td><td>28.02.1997</td><td>13.10.2020</td></tr>
              <tr><td>17</td><td>Refrigerator 2 in one</td><td>1</td><td>22.04.2014</td><td>13.10.2020</td></tr>
              <tr><td>18</td><td>Photographs - Pink bollworm</td><td>1</td><td>30.06.1979</td><td>—</td></tr>
              <tr><td>19</td><td>Printer LaserJet M26-A</td><td>1</td><td>11.02.2021</td><td>04.09.2024</td></tr>
              <tr><td>20</td><td>Motor cycle FDG-10-1006</td><td>1</td><td>24.04.2014</td><td>04.09.2024</td></tr>
              <!-- more rows can be added from original register -->
            </tbody>
          </table>
          <div class="text-end mt-2"><small class="muted">Showing sample entries — full register can be exported on request</small></div>
        </div>
      </div>

      <div class="col-lg-4">
        <div class="card p-3 mb-4">
          <h6 class="mb-3">Verification Overview</h6>
          <canvas id="verifyChart" style="max-height:260px"></canvas>
        </div>

        <div class="card p-3">
          <h6 class="mb-3">Item Types (sample)</h6>
          <ul class="list-unstyled">
            <li>Microscopes & Lab Tools <span class="muted float-end">~12</span></li>
            <li>Sprayers & Field Tools <span class="muted float-end">~10</span></li>
            <li>Office Equipment <span class="muted float-end">~8</span></li>
            <li>Storage & Glassware <span class="muted float-end">~20</span></li>
            <li>Misc / Consumables <span class="muted float-end">~42</span></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-12 text-end">
        <a class="btn btn-primary" id="downloadHtml">Download This Dashboard (HTML)</a>
      </div>
    </div>
  </div>

<script>
$(document).ready(function(){
  $('#assetTable').DataTable({
    pageLength: 10,
    lengthMenu: [5,10,20,50]
  });

  // Sample numbers (derived from register snapshot)
  const total = 92;
  const verified = 48;
  const unverified = total - verified;
  $('#totalEntries').text(total);
  $('#verifiedCount').text(verified);
  $('#unverifiedCount').text(unverified);

  // verification Pie Chart
  new Chart(document.getElementById('verifyChart'), {
    type: 'doughnut',
    data: {
      labels: ['Verified','Unverified'],
      datasets: [{ data: [verified, unverified], backgroundColor: ['#0ea5a4','#f97316'] }]
    },
    options: { plugins: { legend: { position:'bottom' } } }
  });

  // download link: create blob from current HTML and link it
  $('#downloadHtml').on('click', function(){
    const html = '<!doctype html>\n' + document.documentElement.outerHTML;
    const blob = new Blob([html], {type: 'text/html'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'entomology_dashboard.html'; document.body.appendChild(a); a.click();
    setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); }, 1000);
  });
});
</script>
</body>
</html>
